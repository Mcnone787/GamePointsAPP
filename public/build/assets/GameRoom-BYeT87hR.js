import{g as r,b as t,a as m,w as x,d as u,m as G,r as A,f as w,t as l,o as a,q as y,A as K,k as j,u as P,B as R,C as J,h as Q,i as f,e as W,j as L,v as V,n as c,F as I,s as N,H as X,x as Y}from"./app-3w8CR32O.js";import{_ as F,a as Z}from"./DropdownLink-lbYQeXGc.js";const tt={class:"min-h-screen bg-slate-100 relative selection:bg-indigo-500 selection:text-white font-sans"},et={class:"fixed top-0 left-0 right-0 z-50 px-4 py-4 pointer-events-none"},st={class:"max-w-7xl mx-auto flex justify-between items-center"},ot={class:"flex items-center gap-3"},nt={class:"hidden md:flex pointer-events-none absolute left-1/2 -translate-x-1/2"},it={class:"bg-white/90 backdrop-blur-md shadow-sm rounded-2xl px-6 py-2 border border-slate-200/50 pointer-events-auto"},lt={class:"pointer-events-auto"},rt={class:"flex items-center group focus:outline-none"},at={class:"bg-white/90 backdrop-blur-md shadow-sm rounded-full p-1 border border-slate-200/50 flex items-center gap-3 pr-2 sm:pr-4 transition-transform active:scale-95"},dt={class:"h-10 w-10 rounded-full bg-gradient-to-br from-indigo-500 to-violet-600 flex items-center justify-center text-white font-bold text-lg shadow-inner ring-2 ring-white"},ct={class:"font-bold text-slate-700 hidden sm:block"},ut={class:"py-1"},xt={class:"max-w-[100rem] mx-auto pt-24 pb-12 px-4 sm:px-6 relative z-0"},gt={__name:"GameLayout",setup(d){return(i,n)=>(a(),r("div",tt,[t("header",et,[t("div",st,[t("div",ot,[m(u(G),{href:i.route("dashboard"),class:"pointer-events-auto transform transition hover:scale-105 active:scale-95"},{default:x(()=>[...n[0]||(n[0]=[t("div",{class:"bg-white/90 backdrop-blur-md shadow-sm rounded-full px-4 py-2 flex items-center gap-2 border border-slate-200/50"},[t("span",{class:"text-xl"},""),t("span",{class:"font-black text-slate-800 tracking-tight hidden sm:block"},"GamePoints")],-1)])]),_:1},8,["href"])]),t("div",nt,[t("div",it,[A(i.$slots,"header")])]),t("div",lt,[m(Z,{align:"right",width:"48"},{trigger:x(()=>[t("button",rt,[t("div",at,[t("div",dt,l(i.$page.props.auth.user.name.charAt(0).toUpperCase()),1),t("span",ct,l(i.$page.props.auth.user.name),1),n[1]||(n[1]=t("svg",{class:"h-4 w-4 text-slate-400 hidden sm:block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])])]),content:x(()=>[t("div",ut,[m(F,{href:i.route("profile.edit")},{default:x(()=>[...n[2]||(n[2]=[w("锔 Configuraci贸n",-1)])]),_:1},8,["href"]),m(F,{href:i.route("logout"),method:"post",as:"button",class:"text-rose-600"},{default:x(()=>[...n[3]||(n[3]=[w(" Salir",-1)])]),_:1},8,["href"])])]),_:1})])])]),t("main",xt,[A(i.$slots,"default")])]))}},pt={class:"flex items-center gap-2"},bt={class:"text-base font-black text-slate-800 truncate max-w-[150px] sm:max-w-none"},ft={key:0,class:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm"},mt={class:"bg-white rounded-[2.5rem] w-full max-w-md p-8 shadow-2xl border border-white animate-in zoom-in duration-300"},ht={class:"text-center mb-8"},vt={class:"text-slate-500 font-medium"},wt={class:"text-indigo-600 font-bold"},kt=["disabled"],_t={class:"max-w-[1600px] mx-auto"},yt={class:"grid grid-cols-1 lg:grid-cols-12 gap-4 lg:gap-8"},$t={class:"lg:col-span-3 xl:col-span-2 space-y-4"},Ct={class:"bg-white rounded-3xl p-5 shadow-sm border border-slate-100"},jt={class:"bg-indigo-50 rounded-2xl p-4 text-center border-2 border-indigo-100 mb-4"},Pt={class:"text-2xl font-mono font-black text-indigo-600 tracking-wider"},It={class:"grid grid-cols-2 gap-2 text-center"},Ut={class:"bg-slate-50 p-2 rounded-xl border border-slate-100"},Mt={class:"text-lg font-black text-slate-800"},Bt={class:"bg-slate-50 p-2 rounded-xl border border-slate-100"},zt={class:"text-lg font-black text-slate-800"},Et={class:"lg:col-span-6 xl:col-span-7 space-y-4"},St={class:"flex items-center justify-between px-2 mb-2"},Tt={class:"text-lg font-black text-slate-800 flex items-center gap-2"},At={class:"bg-slate-200 text-slate-600 text-[10px] px-2 py-0.5 rounded-md font-bold"},Lt={key:0,class:"flex items-center gap-2 bg-indigo-50 px-3 py-1 rounded-full border border-indigo-100 animate-pulse"},Vt={class:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6"},Nt={key:0,class:"absolute -top-2 -right-1 z-20"},Ft={key:1,class:"absolute -top-2 -right-1 z-20"},Ht={class:"min-w-0 flex-1"},qt={class:"font-black text-sm text-slate-800 truncate leading-tight"},Dt={class:"text-[9px] font-bold text-slate-400 uppercase tracking-tighter"},Ot={key:0,class:"text-[8px] font-black bg-indigo-600 text-white px-1.5 py-0.5 rounded uppercase"},Gt={class:"flex-1 py-6 lg:py-8 flex flex-col items-center justify-center bg-white relative"},Kt={class:"w-24 h-1.5 bg-slate-100 rounded-full mt-3 overflow-hidden shadow-inner"},Rt={key:0,class:"p-3 bg-slate-50/50 border-t border-slate-50"},Jt={key:0,class:"flex gap-2"},Qt=["onClick"],Wt=["onClick"],Xt=["onClick"],Yt={key:1,class:"flex gap-2"},Zt=["onKeyup"],te=["onClick"],ee={key:1,class:"py-3 text-center bg-slate-50/30"},se={class:"text-[9px] font-bold text-slate-400 uppercase tracking-widest"},oe={class:"lg:col-span-3 xl:col-span-3 space-y-4"},ne={class:"bg-white rounded-3xl p-5 shadow-sm border border-slate-100"},ie={class:"space-y-2"},le={class:"flex items-center gap-3 min-w-0"},re={class:"text-[10px] font-black text-slate-400 w-5"},ae={class:"flex items-center gap-2"},de={key:0,class:"text-xs"},xe={__name:"GameRoom",props:{room:Object,players:Array,currentUserPlayerId:Number},setup(d){const i=d,n=y([...i.players]);K(()=>i.players,o=>{o.forEach(e=>{const s=n.value.find(p=>p.id===e.id);s?(e.id!==i.currentUserPlayerId||!h.value)&&(s.points=e.points,s.name=e.name):n.value.push(e)})},{deep:!0});const U=j(()=>[...n.value].sort((o,e)=>e.points-o.points)),H=j(()=>n.value.length===0?0:Math.max(...n.value.map(o=>o.points))),h=y(!1);let M=null;const B=(o,e)=>{var s;o.points+=e,(o.id===i.currentUserPlayerId||i.room.user_id===((s=i.$page.props.auth.user)==null?void 0:s.id))&&(clearTimeout(M),h.value=!0,M=setTimeout(()=>{z(o)},500))},z=o=>{P({points:o.points}).patch(route("players.updatePoints",o.id),{preserveScroll:!0,onFinish:()=>{h.value=!1}})},$=y(null),k=P({points:0}),q=o=>{$.value=o.id,k.points=o.points},E=o=>{o.points=k.points,$.value=null,z(o)},v=P({code:i.room.code,name:""}),D=()=>{v.post(route("rooms.join.post"),{preserveScroll:!0})},C=(o,e)=>{if(o<=0)return"text-slate-400";const s=o/e*100;return s<=25?"text-rose-600":s<=50?"text-orange-600":s<=75?"text-amber-600":"text-emerald-600"},O=(o,e)=>{if(o<=0)return"bg-slate-100";const s=o/e*100;return s<=25?"bg-rose-50":s<=50?"bg-orange-50":s<=75?"bg-amber-50":"bg-emerald-50"},S=o=>{const e=["bg-orange-100 text-orange-600","bg-amber-100 text-amber-600","bg-emerald-100 text-emerald-600","bg-teal-100 text-teal-600","bg-cyan-100 text-cyan-600","bg-indigo-100 text-indigo-600","bg-violet-100 text-violet-600","bg-fuchsia-100 text-fuchsia-600","bg-rose-100 text-rose-600"];return e[o%e.length]},g=j(()=>i.room.initial_points||20),_=y(!1);return R(()=>{window.Echo.private(`room.${i.room.code}`).listen(".points.updated",o=>{if(o.player.id!==i.currentUserPlayerId||!h.value){const e=n.value.findIndex(s=>s.id===o.player.id);e!==-1&&(n.value[e].points=o.player.points)}}).listen(".player.joined",o=>{n.value.find(e=>e.id===o.player.id)||n.value.push(o.player)})}),J(()=>{window.Echo.leave(`room.${i.room.code}`)}),(o,e)=>(a(),r(I,null,[m(u(Q),{title:d.room.name||"Juego"},null,8,["title"]),m(gt,null,{header:x(()=>[t("div",pt,[e[3]||(e[3]=t("span",{class:"text-xl"},"",-1)),t("h1",bt,l(d.room.name||"Partida"),1)])]),default:x(()=>[d.currentUserPlayerId?f("",!0):(a(),r("div",ft,[t("div",mt,[t("div",ht,[e[6]||(e[6]=t("div",{class:"h-20 w-20 bg-indigo-100 rounded-3xl flex items-center justify-center text-4xl mx-auto mb-4 shadow-inner"},"",-1)),e[7]||(e[7]=t("h2",{class:"text-2xl font-black text-slate-800 mb-2"},"隆Hola, Invitado!",-1)),t("p",vt,[e[4]||(e[4]=w("Est谩s a punto de entrar en ",-1)),t("span",wt,l(d.room.name||"esta sala"),1),e[5]||(e[5]=w(". 驴C贸mo quieres que te llamen?",-1))])]),t("form",{onSubmit:W(D,["prevent"]),class:"space-y-4"},[L(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>u(v).name=s),type:"text",placeholder:"Tu nombre o apodo",class:"w-full px-6 py-4 bg-slate-50 border-2 border-slate-100 rounded-2xl focus:border-indigo-500 focus:ring-0 text-lg font-bold text-slate-700",required:""},null,512),[[V,u(v).name]]),t("button",{type:"submit",disabled:u(v).processing,class:"w-full py-4 bg-indigo-600 text-white rounded-2xl font-black text-lg shadow-xl shadow-indigo-200 hover:bg-indigo-700 active:scale-95 transition-all"},l(u(v).processing?"Entrando...":"隆A jugar!"),9,kt)],32)])])),t("div",_t,[t("div",yt,[t("div",$t,[t("button",{onClick:e[1]||(e[1]=s=>_.value=!_.value),class:"lg:hidden w-full flex items-center justify-between bg-white p-4 rounded-2xl shadow-sm border border-slate-100"},[e[9]||(e[9]=t("span",{class:"font-bold text-slate-700 flex items-center gap-2"},"癸 Info",-1)),(a(),r("svg",{class:c(["h-5 w-5 text-slate-400",{"rotate-180":_.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...e[8]||(e[8]=[t("path",{d:"M19 9l-7 7-7-7"},null,-1)])],2))]),t("div",{class:c([{"hidden lg:block":!_.value},"space-y-4"])},[t("div",Ct,[t("div",jt,[e[10]||(e[10]=t("span",{class:"text-[10px] font-bold text-indigo-400 uppercase block mb-1"},"C贸digo",-1)),t("span",Pt,l(d.room.code),1)]),t("div",It,[t("div",Ut,[e[11]||(e[11]=t("span",{class:"text-[9px] font-bold text-slate-400 uppercase block"},"Players",-1)),t("p",Mt," "+l(n.value.length),1)]),t("div",Bt,[e[12]||(e[12]=t("span",{class:"text-[9px] font-bold text-slate-400 uppercase block"},"Vida",-1)),t("p",zt,"わ "+l(g.value),1)])])])],2)]),t("div",Et,[t("div",St,[t("h2",Tt,[e[13]||(e[13]=w(" Tablero ",-1)),t("span",At,l(n.value.length),1)]),h.value?(a(),r("div",Lt,[...e[14]||(e[14]=[t("span",{class:"h-2 w-2 bg-indigo-500 rounded-full"},null,-1),t("span",{class:"text-[10px] font-bold text-indigo-600 uppercase"},"Sincronizando...",-1)])])):f("",!0)]),t("div",Vt,[(a(!0),r(I,null,N(U.value,(s,p)=>{var T;return a(),r("div",{key:s.id,class:c(["relative transition-all duration-300",{"z-10":s.id===d.currentUserPlayerId}])},[s.points===H.value&&s.points>0?(a(),r("div",Nt,[...e[15]||(e[15]=[t("span",{class:"text-xl"},"",-1)])])):f("",!0),s.points<=0?(a(),r("div",Ft,[...e[16]||(e[16]=[t("span",{class:"text-xl"},"",-1)])])):f("",!0),t("div",{class:c(["bg-white rounded-[2rem] shadow-sm border-2 overflow-hidden flex flex-col h-full transition-all",{"border-indigo-500 ring-4 ring-indigo-500/10":s.id===d.currentUserPlayerId&&s.points>0,"border-slate-200 bg-slate-50 opacity-60 scale-[0.98]":s.points<=0,"border-slate-100 hover:border-slate-200":s.id!==d.currentUserPlayerId&&s.points>0}])},[t("div",{class:c(["px-4 py-3 flex items-center gap-3 border-b border-slate-50",O(s.points,g.value)])},[t("div",{class:c(["h-10 w-10 rounded-xl flex items-center justify-center font-black text-xs shadow-inner flex-shrink-0",s.points<=0?"bg-slate-200 text-slate-400":S(s.id)])},l(s.name.charAt(0).toUpperCase()),3),t("div",Ht,[t("p",qt,l(s.name),1),t("p",Dt,l(s.points<=0?"Eliminado":`#${p+1} Posici贸n`),1)]),s.id===d.currentUserPlayerId&&s.points>0?(a(),r("div",Ot,"T煤")):f("",!0)],2),t("div",Gt,[t("span",{class:c(["text-6xl lg:text-7xl font-black tracking-tighter tabular-nums leading-none",C(s.points,g.value)])},l(s.points<=0?"0":s.points),3),t("div",Kt,[t("div",{class:c(["h-full transition-all duration-500",C(s.points,g.value).replace("text","bg")]),style:X({width:`${Math.max(0,Math.min(100,s.points/g.value*100))}%`})},null,6)])]),(s.id===d.currentUserPlayerId||d.room.user_id===((T=o.$page.props.auth.user)==null?void 0:T.id))&&s.points>0?(a(),r("div",Rt,[$.value!==s.id?(a(),r("div",Jt,[t("button",{onClick:b=>B(s,-1),class:"h-12 flex-1 rounded-xl bg-white border border-slate-200 text-rose-500 hover:bg-rose-50 active:scale-90 transition-all flex items-center justify-center shadow-sm"},[...e[17]||(e[17]=[t("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M20 12H4"})],-1)])],8,Qt),t("button",{onClick:b=>q(s),class:"h-12 w-10 rounded-xl bg-white border border-slate-200 text-slate-400 hover:text-indigo-500 active:scale-90 transition-all flex items-center justify-center"},[...e[18]||(e[18]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)])],8,Wt),t("button",{onClick:b=>B(s,1),class:"h-12 flex-1 rounded-xl bg-white border border-slate-200 text-emerald-500 hover:bg-emerald-50 active:scale-90 transition-all flex items-center justify-center shadow-sm"},[...e[19]||(e[19]=[t("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M12 4v16m8-8H4"})],-1)])],8,Xt)])):(a(),r("div",Yt,[L(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=b=>u(k).points=b),class:"w-full rounded-xl border-slate-200 focus:border-indigo-500 focus:ring-0 text-center text-xl font-black py-2",onKeyup:Y(b=>E(s),["enter"])},null,40,Zt),[[V,u(k).points]]),t("button",{onClick:b=>E(s),class:"h-12 w-12 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-md shadow-indigo-100 hover:bg-indigo-700 active:scale-90 transition-all"},[...e[20]||(e[20]=[t("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{d:"M5 13l4 4L19 7"})],-1)])],8,te)]))])):(a(),r("div",ee,[t("span",se,l(s.points<=0?"ELIMINADO":"OBSERVANDO"),1)]))],2)],2)}),128))])]),t("div",oe,[t("div",ne,[e[21]||(e[21]=t("h3",{class:"text-xs font-black text-slate-400 uppercase tracking-wider mb-4"}," Clasificaci贸n",-1)),t("div",ie,[(a(!0),r(I,null,N(U.value,(s,p)=>(a(),r("div",{key:"rank-"+s.id,class:c(["flex items-center justify-between p-3 rounded-2xl transition-all",{"bg-indigo-50 ring-1 ring-indigo-100":s.id===d.currentUserPlayerId,"bg-slate-50/50":s.id!==d.currentUserPlayerId}])},[t("div",le,[t("span",re,l(p+1)+"潞",1),t("div",{class:c(["h-7 w-7 rounded-lg flex items-center justify-center text-[10px] font-bold flex-shrink-0",S(s.id)])},l(s.name.charAt(0).toUpperCase()),3),t("span",{class:c(["text-xs font-bold text-slate-700 truncate",{"line-through opacity-50":s.points<=0}])},l(s.name),3)]),t("div",ae,[p===0&&s.points>0?(a(),r("span",de,"")):f("",!0),t("span",{class:c(["text-xs font-black tabular-nums",C(s.points,g.value)])},l(s.points),3)])],2))),128))])])])])])]),_:1})],64))}};export{xe as default};
